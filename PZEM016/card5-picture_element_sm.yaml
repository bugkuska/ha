type: picture-elements
elements:
  - type: custom:button-card
    entity: sensor.esp32_pzem016_powermon_power
    show_name: false
    show_icon: false
    show_state: true
    state_display: |
      [[[
        const w = Number(entity.state) || 0;
        if (w >= 1000) return (w/1000).toFixed(2) + ' kW';
        return w.toFixed(0) + ' W';
      ]]]
    style:
      top: 29%
      left: 50.5%
      width: 95%
      transform: translate(-50%, -50%)
    styles:
      card:
        - background: none
        - box-shadow: none
        - border-radius: 0px
        - padding: 0px
      state:
        - font-weight: 800
        - font-size: |
            [[[
              const w = Number(entity.state) || 0;
              if (w >= 1000) return '64px';
              if (w >= 500)  return '56px';
              return '50px';
            ]]]
        - color: |
            [[[
              const w = Number(entity.state) || 0;
              if (w >= 1000) return '#ff4d4d';  // แดง
              if (w >= 500)  return '#ffcc00';  // เหลือง
              return '#00ff99';                 // เขียว
            ]]]
        - text-shadow: 2px 2px 6px rgba(0,0,0,0.85)
        - letter-spacing: 1px
  - type: image
    style:
      top: 46%
      left: 48%
      width: 60%
    camera_view: auto
    image:
      media_content_id: media-source://image_upload/caca79144c67239653094fd83e4c708d
      media_content_type: image/gif
      metadata:
        title: disc.gif
        thumbnail: /api/image/serve/caca79144c67239653094fd83e4c708d/256x256
        media_class: image
        navigateIds:
          - {}
          - media_content_type: app
            media_content_id: media-source://image_upload
  - type: state-label
    entity: sensor.esp32_pzem016_powermon_total_daily_energy
    style:
      top: 59.5%
      left: 30%
      font-size: 18px
      color: white
      font-weight: bold
  - type: state-label
    entity: sensor.esp32_pzem016_powermon_current
    style:
      top: 59.5%
      left: 71%
      font-size: 18px
      color: white
      font-weight: bold
  - type: state-label
    entity: sensor.monthly_energy_pea_display
    style:
      top: 83%
      left: 28%
      font-size: 18px
      color: white
      font-weight: bold
  - type: state-label
    entity: sensor.total_cost
    style:
      top: 83%
      left: 70%
      font-size: 18px
      color: white
      font-weight: bold
image:
  media_content_id: media-source://image_upload/d5a178c353508f9c83e4cef6f9d88234
  media_content_type: image/png
  metadata:
    title: smartmeter.png
    thumbnail: /api/image/serve/d5a178c353508f9c83e4cef6f9d88234/256x256
    media_class: image
    navigateIds:
      - {}
      - media_content_type: app
        media_content_id: media-source://image_upload
